#!usr/bin/python3
import datetime
import hashlib
import string
import os
import time

from flask import Flask, request
import peewee as pw
import telebot

from database import Users
from logger import main_log
from telebot import types
import config

main_log.info("Program starting")
TELEGRAM_API = os.environ["telegram_token"]
bot = telebot.TeleBot(TELEGRAM_API)



@bot.message_handler(commands=["start"])
def start(msg):
	main_log.info("Starting func 'start'")
	"""
	–§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ-–∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
	:param msg: –û–±—ä–µ–∫—Ç —Å–æ–æ–±—â–µ–Ω–∏—è-–∫–æ–º–∞–Ω–¥—ã
	"""
	reply_text = (
			"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, —è –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ " +
			" –ø–æ–¥—Å—á–µ—Ç –∫–∞—Ä–º—ã –≤ —á–∞—Ç–µ @khvchat.")
	bot.send_message(msg.chat.id, reply_text)
	
	keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
	chanel = types.KeyboardButton(text="üîà –ö–∞–Ω–∞–ª—ã")
	chats = types.KeyboardButton(text="üí¨ –ß–∞—Ç—ã")
	bots = types.KeyboardButton(text="üîò –ë–æ—Ç—ã")
	addcat = types.KeyboardButton(text="–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞—Ç–∞–ª–æ–≥")
	keyboard.add(chanel, chats,bots,addcat)
	bot.send_message(msg.chat.id, "–•–∞–±–∞—Ä–æ–≤—Å–∫–∏–µ –∫–∞–Ω–∞–ª—ã, —á–∞—Ç—ã –∏ –±–æ—Ç—ã. –í—ã–±–µ—Ä–∏—Ç–µ —Ä—É–±—Ä–∏–∫—É –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö –Ω–∏–∂–µ ‚§µÔ∏è", reply_markup=keyboard)
    
	selected_user = Users.select().where(
		Users.userid == msg.from_user.id)
	if not selected_user:
		insert_user(msg.from_user)

@bot.message_handler(commands=["h","help"])
def helps(msg):

	help_mess = "<b>–•–∞–±–ß–∞—Ç</b> - —á–∞—Ç –≥–æ—Ä–æ–¥–∞ –•–∞–±–∞—Ä–æ–≤—Å–∫–∞.\
	\n\n‚ÑπÔ∏è –í—ã—Ä–∞–∂–µ–Ω–∏—è –ø–æ—Ö–≤–∞–ª—ã –∏ –æ–±—â–µ–Ω–∏–µ –≤ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–º –∫–ª—é—á–µ –ø–æ–≤—ã—à–∞—é—Ç –∫–∞—Ä–º—É, —Ä—É–≥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ–Ω–∏–∂–∞—é—Ç.\
	\n\n<b>–ö–æ–º–∞–Ω–¥—ã:</b>\
	\n/h - –°–ø—Ä–∞–≤–∫–∞\
	\n/weather - –ü–æ–≥–æ–¥–∞\
	\n/no - –î–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π\
	\n/report - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É\
	\n/croco - –ò–≥—Ä–∞ –≤ –ö—Ä–æ–∫–æ–¥–∏–ª\
	\n\n<b>/—É—Ç—Ä–∞ /—Ü–∏—Ç–∞—Ç–∞ /–¥–∞—Ç–∞ /–ø–æ–≥–æ–¥–∞ /–∫–æ—Ç /—à—É—Ç–∫–∞ /? /—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å /–ø—Ä–∏–≤–µ—Ç /—Ñ—Å–± /—Ñ–æ—Ç–æ /–±–∞–Ω</b> - –û—Ç–≤–µ—Ç–æ–º –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ\
	\n\n<b>–ö–∞—Ä–º–∞:</b>\
	\n/my - –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ—é –∫–∞—Ä–º—É\
	\n/top - –£–∑–Ω–∞—Ç—å –Ω–∞–∏–±–æ–ª–µ–µ –±–ª–∞–≥–æ–¥–∞—Ä–∏–º—ã—Ö –≤ —á–∞—Ç–µ\
	\n/gift - –ü–æ–¥–∞—Ä–∏—Ç—å +5 –∫–∞—Ä–º—É\
	\n/freez - –ó–∞–º–æ—Ä–æ–∑–∫–∞ –∫–∞—Ä–º—ã\
	\n/unfreez - –†–∞–∑–º–æ—Ä–æ–∑–∫–∞\
	\n<b>/—Ç–∏–Ω–¥–µ—Ä</b> - –ù–∞–π—Ç–∏ –ø–∞—Ä—É\
	\n<b>üé≤üé∞üèÄüé≥‚öΩÔ∏è</b> - –†–∞–Ω–¥–æ–º –∫–∞—Ä–º—ã"
	
	bot.send_message(msg.chat.id, help_mess, parse_mode="HTML")

@bot.message_handler(commands=["s"])
def send(msg):
	main_log.info("Starting func 'send'")
	if msg.from_user.id not in config.gods:
		return
	if len(msg.text.split()) == 1:
		return
	selected_user = Users.select() 

	for i,user in enumerate(selected_user):
		try:
			if i % 20 == 0:
				time.sleep(1)
			bot.send_message(user.userid, msg.text[2:], parse_mode="HTML" )
		except:
			continue

@bot.message_handler(commands=["id"])
def id(msg):

	selected_user = ["779375467","792064156","342471264","929666403","969968427","845390893","1014446747","1372187031","791117228","1266338084","1448521952","1267726927","455512608","1499835164","1221355227","706900691","1067623933","633443242","558503695","703713709","809340319","243812004","1377570594","1028508239","1486301907","282642264","385008782","866472987","341420036","169453676","537771555","200868908","1313708885","737620474","1332552388","954102313","1080082912","672552018","1205303375","499912998","129451704","440993378","884901769","1232518766","1231968025","1341436187","1276776983","1381347743","1202684196","891118348","927185259","1405481769","392781186","1009043388","942929016","1276431697","466888721","93482890","1306330971","1377184178","1328671293","1207281511","1349593743","652669815","973280780","671876742","1307495753","317264160","1385483908","1189530705","226928083","949366090","458596315","1344094209","733906035","889460952","1103522585","1329665611","562309709","981548648","403275582","312741223","41016042185","1245538970","813628117","704606422","1114479343","1378112431","1002253436","1016222349","504270877","667604671","1271500501","913470107","1223304922","794351892","402292818","966479021","991942254","1329124730","440280580","679223646","1312711517","1276660986","1280363245","1175812857","890733184","1112124196","256866564","1033910765","835564513","1298028160","943013355","1394961543","1109281367","80658331","1071186017","883343892","1160197656","1273936884","998797466","1176133597","853522121","1371239239","1169983554","1288211746","1397213738","1257700974","623328235","746122597","669669518","334773892","679934662","1237077806","630633824","592617529","404068301","330766785","751660533","1284919335","933385399","877098922","1059571092","855705878","1302861713","987111693","1027426751","767412762","1248319084","1100866758","1249640858","732243395","1334428882","1116619796","1194965189","867331393","658002486","584450581","1267680748","348800989","469847801","1082774043","881068616","612422169","1133419628","1181462404","965992951","191574853","1250838845","97001896","1149125310","1058030097","1225098460","1152509620","956107449","1034070005","860478584","1137750988","327491539","1378272271","1277799552","1076427300","344470367","1389222623","780108194","1162191903","1279968169","371950806","794352985","1042196757","982554992","786622458","258910870","1363031681","849608908","1307358036","943098954","433304024","383912809","674248899","1249640858","732243395","1334428882","1116619796","1194965189","867331393","658002486","584450581","1267680748","348800989","469847801","1082774043","881068616","612422169","1133419628","1181462404","965992951","191574853","1250838845","97001896","1149125310","1058030097","1225098460","1152509620","956107449","1034070005","860478584","1137750988","327491539","1378272271","1277799552","1076427300","344470367","1389222623","780108194","1162191903","1279968169","371950806","794352985","1042196757","982554992","786622458","258910870","1363031681","849608908","1307358036","943098954","433304024","383912809","674248899","1185100193","855950591","763239727","795662782","376495190","917982649","557385616","958082694","545281170","741905368","881468525","1055125523","957239323","1229322689","1122016723","1303835023","788492077","828011018","1259135875","759872522","943434466","453305893","974787650","394639592","397168135","271047858","674694428","1176363419","418546214","1283656756","564681911","533063836","950492893","1275621058","1234588706","746794723","1382425907","449097310","907265634","207984111","823847800","1246180160","429054766","889654630","266549009","152679580","243324902","451920882","421050195","1295496033","1193219783","470105057","1199487925","536271469","693608545","1100998564","894206941","1257485086","655210651","806259510","418558873","1261073645","826709833","978275219","846947286","956582811","938610973","627021032","603883284","1334260896","143997117","581947869","870243544","1033148645","1306735007","411728674","490127311","226571523","1027069270","1238150209","720921216","900116718","708537987","677838072","417877099","300906140","1066611657","938462880","107312100","629764221","153747581","521584988","417258043","521410681","732506364","1143818148","568385768","419870549","818649753","809492481","457916228","689268994","1287743221","712779203","1211523002","1148226658","745587285","477152876","295098520","868646942","871831633","671827268","919650419","917112475","937645376","1219855129","1170536053","994810801","700203974","1113874738","1062570142","1276996658","1019713198","845354299","563055129","878259855","977235984","808156856","1278604933","985690766","1158836863","1122355376","1138941795","442646440","831916305","797448989","536878183","620792257","612611582","904145994","1201994909","889178532","1272366614","829230243","660374448","1116457776","488477746","939243843","91288268542","714612745","867835050","881142314","871686938","659068935","1019085400","336428352","678662455","700872551","1262422156","514301471","1261740505","1019650244","1125144441","965257190","739849730","1006750213","693092911","680707164","405649797","434459941","1279091306","1235395876","1091896335","1139255201","537508705","185461880","1153315765","1031041022","1177220723","1184766136","711071392","1066446498","1183158269","833023763","952770246","647675578","88265192","1020176519","855809835","1146178415","989491108","981978224","1159647100","1163806312","231821337","1078232443","976716962","869609112","944554884","1054006001","828244382","319891750","690790300","538092122","1209363848","829987160","434207575","808904236","977606680","1165866789","345217094","422178937","1193241084","1200166293","953964552","1032538669","854653568","1191848308","822147743","805546288","1238839893","901382048","399234268","154569212","908186202","803120607","949998955","1043576114","489153698","914166204","1192565910","376468059","252571371","443268552","386770673","1134466698","911280252","1070476164","232811795","477643828","452323629","1015396616","700859628","1038857099","628607194","949332683","1125303580","932846595","356664292","608364104","1065391930","949857688","582361989","916171128","312934885","1211457836","729117246","966743022","1200339517","490633407","541073117","1159636839","771717298","912142186","778380214","947253667","1155037857","1050384798","721437791","8491580924","1084068901","1137102953","1043839501","1213477183","1228616342","1274022480","285489687","945699328","1116506204","1073644091","1125295212","1008882454","473550830","1254786472","685034839","694197265","306446885","413503033","967834771","819976689","316255534","1248089469","904994248","1070972924","871280578","849623298","326067618","372025946","1101931205","1015865226","342925509","1035608783","1035714999","767896151","986989887","1226319532","234757182","1136702301","11215841706","831080065","146386001","647752859","471737926","1018631473","831854002","1051060124","840856827","975103592","1115564938","1044677725","280395","604291450","919252279","546240995","817364551","1037461461","483525354","865185237","1030932420","931026170","353295757","294544405","240926221","1042737777","1072109994","1049675819","941614765","748892892","6749901","1044064718","440542560","346442526","638802003","930193089","680515307","692927418","757439785","1031189364","925330170","1015253458","1030398586","1080862241","163073889","1010810871","986747216","951087712","613919542","967358049","749952825","990292545","746946727","887528568","269136979","1096932051","897408480","877866980","901547388","967379857","820149418","680826787","1124427553","908585907","1134992065","642840517","88885824","397456487","173214296","787853966","469661302","528940649","451695007","895947835","372686976","809557816","450959269","477957188","1027121682","1038230136","748046876","773060277","968823196","852596072","738794155","1007876601","1073172619","1025866222","1019675375","871488605","386831166","256016430","838957009","876800082","700979704","1058230248","543678847","992863889","608526778","926018182","674818608","659572794","1030491446","502040523","1075940952","467854082","423752897","581758167","517329987","798880782","424291954","404496551","545484271","519786457","802765009","934661429","1006124709","476793055","941900741","813180928","279605111","436336556","216125608","309213166","941479204","999762102","952043341","1024150243","869877457","272153815","420406635","310400546","935453656","373762482","815920638","763835493","438261721","394374478","552541513","1006500898","800599712","595422929","883734158","499019153","900318390","907805468","967361528","950527319","1024081458","1047463547","273606802","878084629","893741849","572439023","768243712","680447705","1030448565","1054389016","980832233","341154386","1094302907","486835662","969997644","977314058","901980856","921872666","715794967","1073934451","220263127","647491214","932219328","962215346","1054169591","756546416","345876415","757048665","892742166","27496177919","438942056","857279026","1006846999","645043763","468975087","914532393","196163647","899989285","610655382","1022623627","256735474","798902438","40422361","932848460","449118167","920361930","923604669","736828445","990893671","925244913","897497369","909436931","877123910","484253528","1069939671","342174377","331480688","572533340","1002898529","838788500","420855406","980654632","122113332","486330571","531902307","417018216","421163106","969732457","613638293","944899929","624529077","802230816","915497004","319774556","959842753","882218446","399285415","878917193","944302006","480963439","492280707","400332001","323845355","1043482517","806033355","437482432","217083550","1001822787","551763982","727274392","698636895","268126590","752198899","848807489","856370337","308609666","111513711","455367054","697432160","440336291","828156257","905549819","789312932","1002082356","1067187448","895785004","756031469","590539657","597639321","411325340","597660742","253566422","475030550","330280207","300046014","313021437","210318363","595792942","758350738","870247192","178410978","909900834","402657518","712730253","935537584","951382385","949818977","197313060","952618877","718184295","496574842","769785180","522286118","514969734","527756974","224603828","486981209","370857011","986235396","1027382289","439721659","148032044","809066793","605262283","873749668","898910706","1059443789","1032404146","197508814","495325930","339749880","744115212","300689584","800993250","944163504","821443105","943732522","782849455","967153009","638810142","982411926","982970074","705893490","351302596","629418893","1009104046","285901164","711452608","531742096","780915250","150999528","937754065","676597293","773638064","778456611","924191322","1029267577","207877300","979823310","610062808","835249726","991353891","259887997","915807592","815450898","404853571","1045998907","827404652","272811398","767082676","754265980","755881868","1027070788","705165184","91162567","1042373235","484239084","890977314","1035753526","838237077","394473253","1037951176","579214528","954327653","336835286","939757238","306211883","486724200","913817926","548741398","318809684","954035024","442707106","324873241","717163626","450916818","321901991","955820179","985192497","898173144","278508968","979436959","966163470","943676270","978934904","765904094","637174586","790711164","644823391","432233371","887742334","856246671","919345184","776311841","864402451","861488395","854853977","634319739","92090065","460947686","458303966","663312724","979845442","951022748","798468474","640711916","895113619","935982915","860067986","434873806","250408226","629207425","96546348","335259391","765366702","460076023","809602024","857445831","499252803","891518825","813892252","670729714","895270955","712589839","265039056","874106042","311700460","447867350","715838731","195754043","39094098","943424556","783224194","439675668","614910382","709541902","318931936","635320232","315179188","886252364","689155419","660245918","796054329","855889472","561198895","964977297","913149878","722809258","513173039","469925419","791757993","579741721","533840960","985490450","319818835","902157661","863828106","433162480","779743887","892850572","419393722","209296244","346129642","711520019","824260143","829670906","987882924","614797453","829623602","384349998","770103951","500233971","774902942","69285268","875404461","362671343","849040877","814110029","803954669","662532133","474279004","853982668","624679721","896035228","617327944","779726375","564532547","674739856","451435941","751720593","823760960","766283462","647003264","316579121","810434770","730766357","882955628","849630600","333759947","838786347","822924485","808873574","277361633","536183214","685197171","251961924","756209157","473256125","651902677","794417291","847166105","357583504","403758683","825632764","830458895","767782903","559801013","359097725","413020046","174893858","651422999","516880589","392588075","304285162","674828053","323597752","524335921","667090744","260999388","143762740","886405091","732523186","660855828","375636992","491593162","660430924","359745318","795663147","595048720","262122572","883584407","510461638","805385686","398583783","506476624","762019273","633402115","260531214","90529628","460828782","470159643","566457301","838761253","621786753","631919483","522214499","5870351","337104939","584614400","164566238","234406814","757127427","694355397","388341675","579070023","632003831","379125838","407166312","362084388","712941296","606209944","863751968","632266760","600501451","301930712","633276475","715139825","659376476","478114544","618246941","654737497","441001706","590996566","680900494","823680601","332680373","528963656","376471321","417299086","643218611","325775310","451268406","670944552","266081087","774063621","255026615","125319215","370555720","867074333","833712132","293617537","325674350","720573066","470627976","887524384","454656733","89305804","755548585","214699258","487702514","737737330","482042964","595229148","765917370","458851901","519149493","452033837","871518874","256978782","509306893","442552293","293493494","771982391","619462339","460615480","615104498","669042123","662325893","541712624","650133746","505770393","429452101","452469799","525074927","553236888","710133357","430516949","683799675","879228626","651607031","379530254","408533330","770413255","101087100","148264908","485141857","551649800","536541172","746516124","653936092","561487479","506670286","462969888","305526560","131942453","394609864","840688343","387307691","318876731","275212239","136437915","277397925","449326712","361354349","370366490","645113879","847236588","365854374","760506858","829384824","804839666","744115910","351163852","383603954","899672080","731231789","763188899","529367641","691472478","36253206","632178140","353977064","539625160","884815577","462966161","156027072","814229495","805549070","645941151","694766621","788263150","629140704","796261415","645155934","649421921","842571710","886734130","340292726","368232105","449725303","357162592","486803870","289814943","574405660","800275809","164880675","799150719","845312388","557052259","798258238","342984888","399994635","644789598","730424504","705678364","543401841","234505723","632401476","533844990","240018892","715623429","449799169","427545224","735093975","477255702","120074666","434236037","617579723","457036292","494281153","723720804","546664538","302026413","708524166","446195968","381105049","683370953","767605899","224400262","476711427","747955802","793670755","790980306","756853322","683814679","346883688","637615956","572383949","383333174","411042270","789399386","651828551","700681786","766988984","634785711","235775245","723791424","294994967","643341053","289735792","714940917","797852472","60178217","634351347","617403454","407901408","632486903","741141863","713106038","483299682","252810483","740423565","556731004","697103978","648681186","313296139","731766729","414826700","408380771","218648916","775914715","439529580","163476112","737488726","150908373","418490577","746054778","691841124","402619772","456127265","304391355","390306981","526089539","610290951","583636877","333966077","585346684","569785224","749731411","318599662","343535798","721218890","549597126","482986203","783045637","517704717","583935860","143515062","723648541","722850284","83379430","638057965","761520313","702755775","334411479","713401542","534088062","792649218","258333865","408452515","341959201","756064786","770742023","719674788","680167380","768178174","654021484","303262449","731639521","549032295","619578626","767960631","730102599","168169607","733401465","500312194","549368878","556216532","546588446","225627675","305871257","529001055","689754622","715723902","443150223","459023569","461321115","797548516","556545863","307207330","779020828","657807937","682893719","229039282","164320483","117265691","468041999","533189172","606923806","664464101","771875957","596553219","755924278","522260552","412856369","399581581","304128094","662722443","492636683","192507369","672128153","571484113","652491366","627157429","474459576","540319240","535838753","375023144","535261175","670645477","693320764","515460869","566192333","576439331","536599101","403919129","563119844","670095176","218665901","638815800","615282465","540648080","433397483","690122785","546816334","313039983","675709218","518156337","570550683","654566690","521563808","645804940","647158229","442784064","575887942","141635671","618807796","613840736","456123232","163583049","572204287","670933778","270747237","649324579","401732897","400663328","672984833","417590178","488937583","569610433","39686402","150609600","609451720","490733276","672242179","309799961","503546405","433324995","292724938","546289888","544343327","456753452","482334644","577353397","500628336","586133807","457152775","308215684","190354015","593782357","444031600","650127423","203269491","578582466","693009969","163740985","459543219","168876756","185781100","156444647","615996437","568709027","558111166","439756431","648609215","326936820","208515219","445730037","216275065","565134987","564768698","502477441","45328941","41662842","541943180","557973339","346691912","346256549","417109367","276684061","320251104","567880551","539042236","406654017","353146297","305313759","273304809","522320980","1550482265","495901986","256652933","606812295","414754695","307249349","312103439","384223949","589045562","533562861","546986800","453214396","604156818","277960223","610727229","589457209","478758114","6571453651","441741762","510722626","315041637","559019104","600504570","441647460","34817120","508382655","597023436","265335628","‡ªê53804812","429863039","368885045","352170945","1580507","266020779","606279621","580117609","431683565","146633663","382978118","350108257","422556821","350052896","245973770","571081866","578981283","608894013","350171789","582567466","174054625","345181672","319754800","493073436","413943726","229816619","548582902","482311026","303901420","566292231","548352410","584865745","402109422","458584609","516309576","539594653","267691906","310916781","273849015","587352948","291840778","496602225","549109189","494753870","451682241","395786796","444015893","431057287","405590403","305897707","558985101","269798759","538562420","581938017","432246039","373597349","460163069","451736642","266432913","576816006","206090466","560830419","589641514","552937587","487693144","247574333","551399285","436709674","45703852","531748475","440144524","257718964","434717827","409260922","408283398","561108680","545086462","515682231","594966461","85889168","481754729","98956466","360270473","400261789","572762094","565286038","268580803","380612013","451949703","355811368","300266768","72705234","397736104","474258171","442549761","548040248","388484386","438261967","156123436","507878285","487191283","482891047","484906076","491966407","526865042","443883960","566933112","228026702","557635923","455585393","580066059","550227672","579446408","330829036","351694882","188849328","483030565","143738422","140872472","407204478","525627904","404666286","451132692","507182525","232912551","538666728","93937128","455521898","245514987","342607789","456198939","476706650","107752950","483919431","581740372","225895156","364481166","542674604","264400880","496282013","208972245","489521481","479903464","216984324","511901431","340167172","342425351","549291072","300864272","234218368","320517242","336810251","165464578","520070767","51221680","418670032","318184768","265765472","558316231","484452080","37830445","237933733","273284395","317093813","284193338","265841473","98344286","70259659","484401200","100220662","469891903","472788664","299762374","289675630","426479327","300543894","499410368","500312243","568884408","541370209","400249350","441961504","475651792","433728485","452516568","351119097","484101216","492029305","405044","509505481","521049041","430789508","437119291","432943753","434011261","399522383","505991996","526849396","446181190","300405250","521833710","301617589","434193079","317380341","382262130","304074432","459200905","464307141","279695426","92636346","265413098","361424397","184853948","450893728","534462027","364081659","381088279","486400700","344611037","465304188","454710955","393556159","307062015","277594896","447385992","165584881","450655204","433699978","177597539","499065968","527497257","524065644","437638504","382622161","526248167","476868390","54771352","387891555","219919006","536676902","432540707","217758871","377979849","317265212","484844023","339506647","441932355","240026098","543596789","473626416","452290709","331978430","411032806","473637326","474711297","345390596","486125147","470788133","411821124","514612508","505760550","200430459","388716525","287157439","514696674","405270902","361639195","502013954","307395840","264387205","450368149","287392628","210092598","348743947","88059226","449115606","229282611","294889687","472501316","378592934","237734936","192708151","448981128","409520997","321086652","151725223","443496694","288371078","33531930","330420330","455791023","105429022","178885472","248487415","305170169","347100299","282520318","406275163","4993626","113214481","4329892918","469321043","383790067","503719945","361243320","389430147","347379861","28208970","254185042","276641212","400579535","437981862","351247252","74697306","222072218","107694732","416689471","181355506","236090275","273592876","302869462","201295208","440018865","503457349","493116223","144474890","492497569","140687385","454622699","502260448","274752274","418163431","503115835","502155315","508107485","424145055","241509380","354515076","87392883","212798557","512686866","434089936","457609238","127586239","463847718","84001357","530191658","485766065","398736802","56305113","479612003","483535717","184669906","541556338","454934593","517264031","506886300","473636138","535198375","478969935","541271824","545282786","464688365","459375469","448769957","452813762","487211446","406626201","499714617","503071005","530970010","56098896","151344526","270521977","542751823","104511622","511374546","330206105","493384141","164374766","190490542","355167913","393366749","494407822","463375863","403620385","457052005","267060854","237844066","419815688","517654263","94977793","477745435","476971563","177325280","350941997","477371776","461505758","452359288","324739297","383754102","384733733","465205514","394199710","357260978","430120902","495651616","501205725","474809199","419995110","421591638","269322413","371477313","337804051","200711590","301798039","471001883","459038775","218296447","185462420","422560406","426657539","311287302","428947077","38766041","414279289","527121835","486983250","109599023","424900235","532524711","322830137","308685420","533611845","408545380","492713255","546105615","406962838","502593","298126288","16610070","127037510","131232208","152623279","526846483","507287366","206977908","144569561","223251468","399669288","434913768","392586377","381358900","462209764","‡πî81706506","226360551","395220992","410702528","230410013","527741704","515757294","351257573","1297815","360968521","376388875","317813980","313122266","171956329","416168375","510246322","406945718","201489513","245978604","51868661","516089589","124741033","372565437","540304684","348409703","320693229","385950498","344116225","87541898","174905787","177662691","82827414","157017444","182027590","240659712","147141741","141968284","154463569","345811382","228010811","411545452","157530907","182788920","348506407","211589274","495981521","440529352","429240592","220332714","67615137","393321613","309758979","502829285","463513933","344821138","161396856","546480766","321288538","210445386","166334358","278924206","181226748","411358621","502108058","289511018","490660622","391170630","2790489","443179706","1382398","300891592","418797269","443651727","77590905","279810283","352341979","439208097","67167346","337255720","527747830","12245613","312980854","383272152","374214285","509990521","379246787","490538340","349117555","343067005","433386049","514005521","507486855","465020368","274675399","295378956","334779200","254708544","331451836","433480243","306817474","495633483","295354694","193212782","372599404","278520144","131421425","147554102","271447446","323166712","28406961","90464193","243141823","145970947","136193770","260560020","386341350","478642014","227954128","456915972","334894779","370267652","328510489","246761808","332894604","504645799","436542877","421490318","528717719","138312364","094843795","284087373","184357908","374027280","122498845","171819942","72004042","238767581","408598661","93782002","479528557","243088831","302364491","535796309","317525471","496377073","438820998","469408640","424519474","76264873","474444220","336264156","500572410","535198900","508254640","372869591","363896054","151878347","159072536","480020612","364338882","499238105","525383073","264779008","403730962","280664894","336678469","373235455","465784736","397154547","483749917","476734752","455704937","326696358","493279977","462003606","75149890","501204166","399039263","447289568","422045128","431581525","399299965","472807760","365161297","459177335","487681658","386860776","36558683","499954461","293445577","485132195","457079621","488400143","359708405","443222753","30668655","394825149","360952895","128886774","41797050","231634263","328316240","48130103","246921193","403242543","324410682","138085274","424520774","415733677","133013061","354115007","365360046","431295004","422750545","435478540","345462758","124720619","457072946","454279235","454068135","333404245","501269579","75274108","372329559","119790170","268488540","429849819","300686786","396830931","420056683","400394090","258118574","82374045","491406551","400138721","249447279","497177437","324265729","337856181","440187266","454235509","427808863","441080094","500938995","3365366086","287499867","279604873","403087737","468228","476439238","374836470","297323578","201730214","470451767","141313171","363431436","354355968","303145730","91061726","395535094","296833997","441942550","459165703","344790050","387820065","332221892","396565647","331559847","245450203","474075660","374745795","427103227","483151401","384281501","209868945","491195485","478398386","338338498","433221976","489015050","327982841","480425324","488705332","242423738","488202207","203614670","85603228","409208915","401405226","251001015","380612593","479637643","119013789","471060118","365095280","336451695","392006922","425724687","141626774","453077527","329955352","474536859","456069433","70136053","249437532","133559159","376646279","332417413","51879840","28537415","309235520","409531839","171237820","137774261","112358363","180548372","219839106","167533627","465598207","174882712","341668455","501871547","478994647","490177484","251473158","473524680","170722073","426174271","435820105","305293845","478981057","438892656","232068471","219206242","485635580","463487359","377376697","350131053","49124234","260483661","449516039","184752635","430729538","462385975","249271936","433096720","196213803","298774602","151989589","125344038","464732038","337442701","293331771","266212835","355642141","500195066","355607275","123079185","6629115","346827348","505268548","467070279","204242461","297363561","213044439","470812433","353392178","125950215","471132938","330288495","403588831","305755935","453744267","435357925","181423573","498697067","474568896","270983837","207202004","388265422","408812155","464059039","226060403","458115090","406627394","376940196","394532849","411748182","453328372","347475319","376684242","421275716","180951818","307223350","315144488","252827554","334770979","161815554","143375163","350664179","406144483","167226","152849619","335214123","456263750","395865215","333610453","490396901","319662789","437954546","238003179","341884266","234071920","475987323","68021691","412989815","413454530","162711464","404229277","417186221","418265812","388979497","300298340","453334137","444771398","27949165","284024981","401783688","328148097","103161475","124228541","365507464","361726561","403179628","460094725","434528452","468760781","448706874","316864754","341167968","479620934","434335692","198799533","172866564","294648703","289038039","360937947","439486661","208054611","455175884","133893892","73400493","31498986","454302907","279943901","221851001","453432230","403126327","429253732","168942386","192528036","327457527","446379385","163984171","358212142","379169237","335136406","466263356","478157313","468520169","417988806","73762291","75888470","327459415","451559959","408171986","317020253","199762139","303155176","411173981","947789","104504","275499866","342098884","335090315","405440728","368671251","425992926","316716256","439986991","137490108","170436989","434177012","474161674","473037078","432262357","472186590","277873887","433645595","328736072","276632213","426450311","439560932","51954141","360801359","318718202","78347660","117623264","450150684","340571611","417727952","344880763","478980213","129247883","275904220","203829785","198955215","195524653","446252016","418890963","149790341","180356328","388979790","197465641","368119100","255998315","463946858","470948363","235874810","255021510","337976456","430731703","274998889","465341551","256229384","455026117","107633757","320073937","228507315","443697781","353188692","389908552","370994596","422344260","429011798","263371539","333280655","207425747","10741034","197118068","388873868","226905737","270007101","409022562","380866318","134649706","86825230","420486094","200352801","359858989","333995052","251628705","244006208","152445037","357809682","420128231","302634200","366612082","188153227","345528038","354844874","270244761","283596219","369886886","73882686","339939998","16219999","362887834","450815461","462767284","185174319","202174406","112091683","215711060","113546447","233999273","401738592","411248988","379293660","245918630","261850955","264780475","172745497","172213964","53341522","430251027","389775500","181914820","236817362","472439167","404728441","422089314","83361216","377087339","421641853","48901943","359256397","343198938","461257485","334120077","361721331","325023921","258940749","258076366","404490942","319927777","216100482","131698181","316055996","303522608","222254374","131136472","383559518","385646795","379770872","101038772","336711293","22659797","165120759","394126346","123558975","364644044","202342208","279394392","356136343","400765684","124210971","196231821","477847832","385511177","300101625","218140329","53940729","166830654","449072591","303842084","456880794","130035408","374221512","206673933","253543001","112573247","353383854","260324652","408375662","391110349","251986971","189177919","300551312","459634559","240908683","165205721","169869055","310508905","351713868","220453751","348777138","461444049","404471985","406378063","189898709","450341732","335517618","253713679","258913661","451573813","259307080","431321696","62537858","420493399","377272437","320547516","366655720","444785351","419844019","424700298","407221252","392943984","447186258","320449677","415051324","385560076","142927553","370307684","398940141","271362032","315853852","167950755","65563188","358682997","105755662","392391460","396089458","302302976","160049130","407029930","208461212","367965357","377158697","321570718","218613897","370892224","301650855","42480713","460289457","69378815","289982459","258472949","466666960","252532337","76321","435323240","477858660","383085149","212301983","154950440","410007716","187436714","454297982","255368459","329345098","437331634","360625208","372372121","426295253","343831356","440968072","295598550","149444390","309950214","417647184","223219083","342980099","154422928","244317801","102902493","410747496","274407372","203538485","264025001","158099005","424262727","218508540","124784357","278559080","53816165","297646392","200526759","397615624","445163415","379200176","120440211","411862530","325064540","225334789","326818170","314157107","267554574","383824973","347794964","282443319","15151834","411396950","103800139","228450887","291115881","423215423","221151222","235812566","365934850","375594907","474669519","136787929","436226489","249377573","462354565","443291538","442048755","358071649","403645113","439090495","444816814","242572816","436468502","350839946","343565851","377789816","414652523","393869719","446148747","346724308","395902921","341396411","213460661","427432822","401058191","448188680","307184046","322717399","246934813","417789979","393589476","441692119","382538568","155109940","298482113","294777702","368164338","347232513","365057803","433802213","436526246","200723919","372759413","336081323","440481668","319042007","414293298","293594430","427794984","142373043","381501675","378246947","302576250","416898404","383724192","143037725","462990228","409547900","276509643","372491302","109268834","401792577","304172617","375567957","234570663","117048540"] 

	for i, user in selected_user:
		try:
			if i % 20 == 0:
				time.sleep(1)
			new_user = Users.create(
				userid=user)
			new_user.save()
		except:
			continue
			
def insert_user(user):
	main_log.info("Starting func 'insert_user'")

	new_user = Users.create(
				userid=user.id)
	new_user.save()
	
@bot.message_handler(content_types=['text'])
def catalogchk(msg):
	if msg.text == "üîà –ö–∞–Ω–∞–ª—ã":
		chanel = "<b>‚Ä¢ –ù–æ–≤–æ—Å—Ç–∏</b>\
\n\n@khv_news - –∫—É–¥–∞ —Å—Ö–æ–¥–∏—Ç—å, –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏, –∏ –æ–±—â–µ–Ω–∏–µ –≤ –•–∞–±–∞—Ä–æ–≤—Å–∫–µ‚≠ê\
\n\n@truehabarovsk - –•–∞–±–∞—Ä–æ–≤—Å–∫–∏–µ —Ç—ë—Ä–∫–∏ - –ø–æ–ª–∏—Ç–∏–∫–∞, –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è, –∫–∞—Ä—Ç–∏–Ω–∞ –¥–Ω—è\
\n\n@amurmedianews - –±—ã—Å—Ç—Ä—ã–µ, —Å–≤–µ–∂–∏–µ –∏ —Ä–∞–∑–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –•–∞–±–∞—Ä–æ–≤—Å–∫–∞ –∏ –•–∞–±–∞—Ä–æ–≤—Å–∫–æ–≥–æ –∫—Ä–∞—è\
\n\n@khabarovsktg - –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –∫–∞–Ω–∞–ª, —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –±–µ–∑ –≤–æ–¥—ã, –ø–æ–≥–æ–¥–∞, –ø—Ä–æ–±–∫–∏ –∏ –∫—É—Ä—Å –≤–∞–ª—é—Ç\
\n\n@sminych - —Ç–æ—á–∫–∞ –∑—Ä–µ–Ω–∏—è —Ö–∞–±–∞—Ä–æ–≤—Å–∫–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∏—Å—Ç–∞ –°–µ—Ä–≥–µ—è –ú–∏–Ω–≥–∞–∑–æ–≤–∞\
\n\n@nedebri - –æ–∫–æ–ª–æ–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –∂–∏–∑–Ω—å –î–∞–ª—å–Ω–µ–≥–æ –í–æ—Å—Ç–æ–∫–∞\
\n\n@korifeyhab - –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–∞–Ω–∞–ª –•–∞–±–∞—Ä–æ–≤—Å–∫–æ–≥–æ –∫—Ä–∞—è\
\n\n@t_khabarovsk - —Ç–∏–ø–∏—á–Ω—ã–π –•–∞–±–∞—Ä–æ–≤—Å–∫, –Ω–∞—Ä–æ–¥–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –Ω–∞—à–µ–≥–æ –≥–æ—Ä–æ–¥–∫–∞, –≤ –ª—É—á—à–∏—Ö —Ç—Ä–∞–¥–∏—Ü–∏—è—Ö\
\n\n@vehernij_habarovsk - –≤–µ—á–µ—Ä–Ω–∏–π –•–∞–±–∞—Ä–æ–≤—Å–∫\
\n\n@guberniaonline - –ì—É–±–µ—Ä–Ω–∏—è - –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤ –•–∞–±–∞—Ä–æ–≤—Å–∫–µ\
\n\n@newskhv - –Ω–æ–≤–æ—Å—Ç–∏ –æ –∫–æ—Ç–æ—Ä—ã—Ö –≥–æ–≤–æ—Ä–∏—Ç –≤–µ—Å—å –≥–æ—Ä–æ–¥, —Å–∞–º–æ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ\
\n\n<b>‚Ä¢ –†–∞–∑–Ω–æ–µ</b>\
\n\n@love_khv - –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ –≤ –•–∞–±–∞—Ä–æ–≤—Å–∫–µ‚≠êÔ∏è\
\n\n@j_crush - –∏–Ω–æ–≥–¥–∞ –∑–∞–º–µ—Ç–∫–∏ –æ –•–∞–±–∞—Ä–æ–≤—Å–∫–µ\
\n\n@khabara_ru - –û–±—ä—è–≤–ª–µ–Ω–∏—è –•–∞–±–∞—Ä–æ–≤—Å–∫\
\n\n@sky_khv - –§–∏—Ç–Ω–µ—Å-–∫–ª—É–± Sky - —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, –∞–∫—Ü–∏–∏\
\n\n@hbk_market - –±–∞—Ä–∞—Ö–æ–ª–∫–∞ –•–∞–±–∞—Ä–æ–≤—Å–∫–∞"

	if msg.text == "üí¨ –ß–∞—Ç—ã":
		chanel = "‚Ä¢ <b>–û–±—â–µ–Ω–∏–µ</b>\
\n\n@khvchat - —Å–∞–º—ã–π –∫—Ä—É–ø–Ω—ã–π —á–∞—Ç –•–∞–±–∞—Ä–æ–≤—Å–∫–∞‚≠êÔ∏è\
\n\n@dvchat - –ß–∞—Ç –î–∞–ª—å–Ω–µ–≥–æ –í–æ—Å—Ç–æ–∫–∞\
\n\n@pokemongokhv - –≥—Ä—É–ø–ø–∞ –•–∞–±–∞—Ä–æ–≤—Å–∫–∞ –ø–æ –∏–≥—Ä–µ Pokemon Go\
\n\n@habchat - —Ç–∏–ø–∏—á–Ω—ã–π –•–∞–±–∞—Ä–æ–≤–ß–∞—Ç\
\n\n@xadev_chat - IT-—Å–æ–æ–±—â–µ—Å—Ç–≤–æ –•–∞–±–∞—Ä–æ–≤—Å–∫–∞\
\n\n@rybak_amur - —Ä—ã–±–∞–∫ –ü—Ä–∏–∞–º—É—Ä—å—è\
\n\n<b>‚Ä¢ –û–±—ä—è–≤–ª–µ–Ω–∏—è</b>\
\n\n@market27 - –¥–æ—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –•–∞–±–∞—Ä–æ–≤—Å–∫–∞‚≠êÔ∏è\
\n\n@khvjob - –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç—ã –≤ –•–∞–±–∞—Ä–æ–≤—Å–∫–µ. –í–∞–∫–∞–Ω—Å–∏–∏ –∏ —Ä–µ–∑—é–º–µ‚≠êÔ∏è\
\n\n@rupor_khv - –•–∞–±–∞—Ä–æ–≤—Å–∫–∞—è –≥—Ä—É–ø–ø–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π\
\n\n<b>‚Ä¢ –†–∞–∑–Ω–æ–µ</b>\
\n\n@stopgai27 - STOP GAI [–•–∞–±–∞—Ä–æ–≤—Å–∫]\
\n\n@freetaxi_hbk - –ü–æ–¥–≤–µ–∑—É –±–µ—Å–ø–ª–∞—Ç–Ω–æ –•–ë–ö - –ø–æ–º–æ—â—å –≤ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ –•–∞–±–∞—Ä–æ–≤—Å–∫—É\
\n\n@game_pub - –ß–∞—Ç –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –∏–≥—Ä–∞–º –∏ –≤—Å–µ–º—É —á—Ç–æ —Å –Ω–∏–º–∏ —Å–≤—è–∑–∞–Ω–æ"
	if msg.text == "üîò –ë–æ—Ç—ã":
		chanel = "‚Ä¢<b> –ë–æ—Ç—ã</b>\
\n\n@khvbot - –∫–∞—Ç–∞–ª–æ–≥ –∫–∞–Ω–∞–ª–æ–≤, —á–∞—Ç–æ–≤ –∏ –±–æ—Ç–æ–≤ –•–∞–±–∞—Ä–æ–≤—Å–∫–∞‚≠êÔ∏è\
\n\n@moder_khvbot - –º–æ–¥–µ—Ä–∞—Ç–æ—Ä –Ω–∞ –∑–∞—â–∏—Ç–µ —á–∞—Ç–∞ –•–∞–±–∞—Ä–æ–≤—Å–∫–∞ @khvchat \
\n\n@uslugi27Bot - –≥–æ—Å—É—Å–ª—É–≥–∏ –•–∞–±–∞—Ä–æ–≤—Å–∫–æ–≥–æ –∫—Ä–∞—è\
\n\n@botvacc27bot - –≤—Å–µ –æ –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏–∏ –≤ –•–∞–±–∞—Ä–æ–≤—Å–∫–æ–º –∫—Ä–∞–µ"

	if msg.text == "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞—Ç–∞–ª–æ–≥":
		chanel ="–ß—Ç–æ–±—ã –ø–æ–ø–∞—Å—Ç—å –≤ –∫–∞—Ç–∞–ª–æ–≥ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:\
\n\n‚Ä¢ –∏–º–µ—Ç—å –Ω–µ –º–µ–Ω–µ–µ 50-100 –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤\
\n‚Ä¢ –ø—Ä–∏—Å–ª–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∞–¥—Ä–µ—Å (—Ç–∏–ø–∞ @khv_news) —Å—é–¥–∞: @khv_robot\
\n‚Ä¢ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–º–∞—Ç–∏–∫–∏ —è–≤–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –•–∞–±–∞—Ä–æ–≤—Å–∫–æ–º\
\n‚Ä¢ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –†–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –±–æ—Ç–µ –≤ —Å–≤–æ–µ–º –∫–∞–Ω–∞–ª–µ\–≥—Ä—É–ø–ø–µ\
\n\n–°–ø–∞—Å–∏–±–æ!"

	bot.send_message(msg.chat.id, f"{chanel}", parse_mode="HTML")
		


		




# bot.polling(none_stop=True)


# –î–∞–ª—å–Ω–µ–π—à–∏–π –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —É–¥–∞–ª–µ–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤
server = Flask(__name__)


@server.route("/bot", methods=['POST'])
def get_message():
	""" TODO """
	decode_json = request.stream.read().decode("utf-8")
	bot.process_new_updates([telebot.types.Update.de_json(decode_json)])
	return "!", 200


@server.route("/")
def webhook_add():
	""" TODO """
	bot.remove_webhook()
	bot.set_webhook(url=config.url)
	return "!", 200

@server.route("/<password>")
def webhook_rem(password):
	""" TODO """
	password_hash = hashlib.md5(bytes(password, encoding="utf-8")).hexdigest()
	if password_hash == "5b4ae01462b2930e129e31636e2fdb68":
		bot.remove_webhook()
		return "Webhook removed", 200
	else:
		return "Invalid password", 200


server.run(host="0.0.0.0", port=int(os.environ.get('PORT', 5000)))
